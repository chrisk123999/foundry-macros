{
  "name": "Formulas: Reconstruction",
  "type": "feat",
  "system": {
    "description": {
      "value": "<p>For 1 hour, at the start of each of your turns when you have at least 1 hit point but fewer hit points than half your hit point maximum, you regain hit points equal to your proficiency bonus. However, your speed is reduced by 10 feet during this time.</p>",
      "chat": "",
      "unidentified": ""
    },
    "source": "Blood Hunter : Order of the Mutant",
    "activation": {
      "type": "bonus",
      "cost": 1,
      "condition": ""
    },
    "duration": {
      "value": 1,
      "units": "hour"
    },
    "target": {
      "value": null,
      "width": null,
      "units": "",
      "type": "self"
    },
    "range": {
      "value": null,
      "long": null,
      "units": ""
    },
    "uses": {
      "value": 0,
      "max": "1",
      "per": "charges",
      "recovery": ""
    },
    "consume": {
      "type": "",
      "target": "",
      "amount": null
    },
    "ability": null,
    "actionType": "",
    "attackBonus": 0,
    "chatFlavor": "",
    "critical": {
      "threshold": null,
      "damage": ""
    },
    "damage": {
      "parts": [],
      "versatile": ""
    },
    "formula": "",
    "save": {
      "ability": "",
      "dc": null,
      "scaling": "spell"
    },
    "requirements": "",
    "recharge": {
      "value": null,
      "charged": false
    }
  },
  "flags": {
    "ddbimporter": {
      "id": 1668735,
      "type": "class",
      "dndbeyond": {
        "requiredLevel": 3,
        "displayOrder": 2,
        "levelScale": null,
        "levelScales": [],
        "limitedUse": [],
        "choice": {
          "label": "Reconstruction",
          "choiceId": "3-285251-248993875",
          "componentId": 1668735,
          "componentTypeId": 12168134,
          "parentChoiceId": null,
          "subType": null,
          "wasOption": false,
          "type": "class"
        },
        "class": "Blood Hunter : Order of the Mutant"
      },
      "class": "Blood Hunter",
      "subclass": "Order of the Mutant",
      "importId": "Iz6aKBpA2ZXVenPH"
    },
    "obsidian": {
      "source": {
        "type": "class",
        "text": "Blood Hunter"
      }
    },
    "core": {
      "sourceId": "Actor.FOQqZFacoInNVESR.Item.13mBQ7LzX5KYRZeY"
    },
    "custom-character-sheet-sections": {
      "sectionName": "Active Abilities - Blood Hunter"
    },
    "magicitems": {
      "enabled": false,
      "equipped": false,
      "attuned": false,
      "charges": "0",
      "chargeType": "c1",
      "destroy": false,
      "destroyFlavorText": "reaches 0 charges: it crumbles into ashes and is destroyed.",
      "rechargeable": false,
      "recharge": "0",
      "rechargeType": "t1",
      "rechargeUnit": "r1",
      "sorting": "l"
    },
    "rest-recovery": {
      "data": {
        "recovery": {
          "enabled": false
        }
      }
    },
    "link-item-resource-5e": {
      "resource-link": ""
    },
    "exportSource": {
      "world": "wordal",
      "system": "dnd5e",
      "coreVersion": "10.290",
      "systemVersion": "2.0.3"
    }
  },
  "effects": [
    {
      "label": "Formulas: Reconstruction",
      "icon": "icons/tools/laboratory/bowl-liquid-pink-yellow-green.webp",
      "changes": [
        {
          "key": "system.attributes.movement.all",
          "mode": 0,
          "value": "-10",
          "priority": 20
        }
      ],
      "transfer": false,
      "_id": "na9q6jNYyFxNZhMf",
      "disabled": false,
      "duration": {
        "startTime": null,
        "seconds": null,
        "combat": null,
        "rounds": null,
        "turns": null,
        "startRound": null,
        "startTurn": null
      },
      "origin": null,
      "tint": null,
      "flags": {
        "dae": {
          "selfTarget": true,
          "selfTargetAlways": false,
          "stackable": "none",
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": [
            "shortRest",
            "longRest"
          ]
        },
        "core": {
          "statusId": ""
        },
        "effectmacro": {
          "onTurnStart": {
            "script": "function applyDamage(damage, damageType, targets) {\n\tawait MidiQOL.applyTokenDamage(\n\t\t[\n\t\t\t{\n\t\t\t\tdamage: damage,\n\t\t\t\ttype: damageType\n\t\t\t}\n\t\t],\n\t\tdamage,\n\t\tnew Set(targets),\n\t\tnull,\n\t\tnull\n\t);\n}\nlet currentHP = actor.system.attributes.hp.value;\nlet maxHP = actor.system.attributes.hp.max;\nif (currentHP < (maxHP / 2)) {\n\tlet profBonus = actor.system.attributes.prof;\n\tawait applyDamage(profBonus, 'healing', [token]);\n}"
          },
          "onCombatEnd": {
            "script": "function applyDamage(damage, damageType, targets) {\n\tawait MidiQOL.applyTokenDamage(\n\t\t[\n\t\t\t{\n\t\t\t\tdamage: damage,\n\t\t\t\ttype: damageType\n\t\t\t}\n\t\t],\n\t\tdamage,\n\t\tnew Set(targets),\n\t\tnull,\n\t\tnull\n\t);\n}\nlet currentHP = actor.system.attributes.hp.value;\nlet maxHP = actor.system.attributes.hp.max;\nlet profBonus = actor.system.attributes.prof;\nlet healAmount = 0;\nlet count = 0;\nwhile ((currentHP +  healAmount) < (maxHP / 2)) {\n\thealAmount += profBonus;\n\tcount += 1;\n\tif (count === 99) break;\n}\nawait applyDamage(healAmount, 'healing', [token]);"
          }
        }
      }
    }
  ],
  "img": "icons/tools/laboratory/bowl-liquid-pink-yellow-green.webp",
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "2.0.3",
    "coreVersion": "10.290",
    "createdTime": 1666169017918,
    "modifiedTime": 1668244533448,
    "lastModifiedBy": "Ci2oCKdswvomgIrG"
  }
}